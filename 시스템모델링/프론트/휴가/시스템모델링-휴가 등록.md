시스템 명칭: 휴가관리시스템-미니
모델 명칭:  휴가 등록
레벨: 시스템-프론트

# 개요 및 목표
1. 사용자가 휴가를 등록한다.
	1. 사용하려는 휴가유형의 잔여일이 있어야 한다.
	2. 같은 휴가유형의 
2. 사용자가 휴가유형을 선택한다.
3. 사용자가 사용유형을 선택한다.
4. 사용자가 휴가를 추가한다.
	1. 3번~5번을 반복할 수 있다.
	2. 단, 휴가유형을 변경하면 리셋이 된다.
5. 사용자가 휴가를 등록한다.

# 선행 조건
1. 사용자가 웹페이지에 로그인한 상태이다.

# 시작 이벤트
1. 시스템이 모델을 호출한다. [실행환경 설정]

# 모델 시나리오
1. 시스템은 휴가등록 기본항목을 표시한다.
2. 사용자가 휴가유형을 선택한다.  [ 휴가유형선택 ]
3. 시스템은 사용유형을 표시한다.
4. 사용자가 사용유형을 선택한다. 
5. 사용유형 "종일"을 선택한다. [사용유형-종일 선택]
	1. 시스템은 사용유형-종일 세부항목을 표시한다.
	2. 사용자가 시작일을 입력한다. [종일-시작일 선택]
	3. 사용자가 종료일을 입력한다. [종일-종료일 선택]
	4. 시스템은 신청일수를 표시한다.
6. 사용유형 "반차"을 선택한다. [사용유형-반차 선택]
	1. 시스템은 사용유형-반차 세부항목을 표시한다.
	2. 사용자가 사용일을 입력한다. [반차-사용일 선택]
	3. 사용자가 사용시간을 선택한다. [반차-사용시간 선택]
	4. 시스템은 신청일수를 표시한다.
7. 사용시간 "시간차"을 선택한다. [사용유형-시간차 선택 ]
	1. 시스템은 사용유형-시간 세부항목을 표시한다.
	2. 사용자가 사용일을 입력한다. [시간차-사용일 선택]
	3. 사용자가 시작시간을 입력한다. [시간차-시작시간 선택]
	4. 사용자가 종료시간을 입력한다. [시간차-종료시간 선택]
	5. 시스템은 신청일수를 표시한다.
8. 사용자가 <+>를 클릭한다. [사용유형 추가]
9. 시스템은 휴가 추가 리스트을 표시한다.
	1. {설명} 사용자는 4번~8번을 반복할 수 있다.
10. 사용자가 <등록>을 클릭한다. [휴가 등록]
11. 사용자가 <닫기>을 클릭한다. [메뉴 닫기]


# 이벤트 처리
### [실행환경 설정]
1. 시스템은 선택상자를 생성한다.
	1. "휴가유형" 라벨을 첨부한다.
	2. {선택항목} "선택", 사용자.저장공간의 휴가유형명들
	3. {선택값} "", 사용자의 저장공간의 휴가유형 id
	4. 기본항목의 "휴가유형"에 추가한다.
2. 시스템은 긴글 상자를 생성한다.
	1. "휴가사유" 라벨을 첨부한다.
	2. 기본항목의 "휴가사유"를 추가한다.
3. 시스템은 휴가등록 기본항목을 편집한다.
	1. {항목} 휴가유형, 휴가사유, 휴가 추가 리스트
	2. <등록>, <닫기> 버튼
	3. <등록>, <닫기> 에 click 이벤트를 설정한다.

### [휴가유형선택]
1. 시스템은 사용가능 기간을 편집한다.
	1. "사용가능 기간" 라벨을 첨부한다.
	2. 사용자가 선택한 휴가유형의 사용가능일, 사용만료일을 "YYYY-MM-DD" 형태로 편집한다.
		1. {예시} 사용가능일 ~ 사용만료일
	3. 휴가유형 세부항목에 "사용가능 기간"에 추가한다.
2. 시스템은 입력상자를 생성한다.
	1. "미사용 일수" 라벨을 첨부한다.
	2. 사용자가 선택한 휴가유형의 "부여일수 - 사용일수"를 기본값을 갖는다.
	3. 입력상자 오른쪽에 "일"을 추가한다.
	4. 입력상자를 "readonly" 처리한다.
	5. 휴가유형 세부항목에 "미사용 일수"에 추가한다.
3. 시스템은 선택상자를 생성한다.
	1. "사용유형" 라벨을 첨부한다.
	2. {선택항목} 선택, 종일, 오후반차, 오전반차, 시간차
	3. {선택값} "", "100", "200", "300", "400"
	4. {설명} 백엔드와 프론트에서 같은 값을 가지도록 한다.
4. 시스템은 휴가유형 세부항목을 편집한다.
	1. {항목} 사용가능 기간, 미사용 일수, 사용유형
	2. <+> 버튼
	3. <+> 에 click 이벤트를 설정한다.

### [사용유형-종일 선택]
1. 시스템은 날짜 입력상자를 두개 생성한다.
	1. "사용 기간" 라벨을 첨부한다.
	2. 입력박스는 "YYYY-MM-DD" 입력형태를 가진다.
	3. 시작일(첫번째 날짜 입력박스)와 종료일(두번째 날짜 입력박스) 사이에 "~"을 추가한다.
		1. {예시} 시작일 ~ 종료일
	4. 세부항목의 "사용 기간"에 추가한다.
2. 시스템은 사용유형-종일 세부항목을 편집한다.
	1. {항목} 사용 기간, 신청일수

### [종일-시작일 선택]
1. 시스템은 선택한 날짜가 휴일인지 확인한다. [휴일 확인]
2. 시스템은 종료일이 입력되어 있는지 확인한다.
	1. 종료일이 입력되어 있다. [산정기간 산출]
	2. 사용유형-종일 세부항목의 신청일수를 반환받은 신청일수로 변경한다.

### [종일-종료일 선택]
1. 시스템은 선택한 날짜가 휴일인지 확인한다. [휴일 확인]
2. 시스템은 시작일이 입력되어 있는지 확인한다.
	1. 시작일이 입력되어 있다. [산정기간 산출]
	2. 사용유형-종일 세부항목의 신청일수를 반환받은 신청일수로 변경한다.

### [사용유형-반차 선택]
1. 시스템은 날짜 입력상자를 생성한다.
	1. "사용일" 라벨을 첨부한다.
	2. 입력박스는 "YYYY-MM-DD" 입력형태를 가진다.
	3. 세부항목의 "사용일"에 추가한다.
2. 시스템은 선택상자를 생성한다.
	1. "사용시간" 라벨을 첨부한다.
	2. {선택항목} "선택", "오전", "오후"
	3. {선택값} "", "09~12", "13~18"
	4. 세부항목의 "사용시간"에 추가한다.
3. 시스템은 사용유형-반차 세부항목을 편집한다.
	1. {항목} 사용일, 사용시간, 신청일수

### [반차-사용일 선택]
1. 시스템은 선택한 날짜가 휴일인지 확인한다. [휴일 확인]

### [반차-사용시간 선택]
1. 시스템은 신청일수를 산출한다. [산정기간 산출]
	1. 파라미터의 시작일, 종료일을 선택한 날짜로 넘긴다.
	2. 사용유형-반차 세부항목의 신청일수를 반환받은 신청일수로 변경한다.

### [사용유형-시간차 선택]
1. 시스템은 날짜 입력상자를 생성한다.
	1. "사용일" 라벨을 첨부한다.
	2. 입력박스는 "YYYY-MM-DD" 입력형태를 가진다.
	3. 세부항목의 "사용일"에 추가한다.
2. 시스템은 시간 입력상자를 두 개를 생성한다.
	1. "사용시간" 라벨을 첨부한다.
	2. 입력상자는 "hh" 입력형태를 가진다.
	3. 입력상자의 범위는 09에서 18이다.
	4. 시작시간(첫번째 입력상자)와 종료시간(두번째 입력상자)사이에 "~"을 추가한다.
		1. {예시} 시작시간 ~ 종료시간
	5. 세부항목의 "사용시간"에 추가한다.
3. 시스템은 사용유형-시간차 세부항목을 편집한다.
	1. {항목} 사용일, 사용시간, 신청일수

### [시간차-사용일 선택]
1. 시스템은 선택한 날짜가 휴일인지 확인한다. [휴일 확인]

### [시간차-시작시간 선택]
1. 시스템은 종료시간이 선택되어 있는지 확인한다.
	1. 종료시간이 입력되어 있다. [산정기간 산출-시간차]
		1. 사용유형-시간차 세부항목의 신청일수를 반환받은 신청일수로 변경한다.

### [시간차-종료시간 선택]
1. 시스템은 시작시간이 선택되어 있는지 확인한다.
	1. 시작시간이 입력되어 있다. [산정기간 산출-시간차]
		1. 사용유형-시간차 세부항목의 신청일수를 반환받은 신청일수로 변경한다.

### [사용유형 추가]
1. 시스템은 필수 입력 항목을 체크한다.
	1. {항목} 종일 => 휴가유형ID, 사용유형, 시작일, 종료일, 신청일수
	2. {항목} 반차 => 휴가유형ID, 사용유형, 사용일, 사용시간, 신청일수
	3. {항목} 시간차 => 휴가유형ID, 사용유형, 사용일, 시작시간, 종료시간, 신청일수
	4. 빈 값이 존재한다.
		1. 시스템은 [[시스템모델링-메시지 표시|"메시지 표시"]]를 호출한다.
			1. {파라미터} "신청한 휴가의 항목을 다시 확인해주세요."
	5. 신청일수가 0이다.
		1. 시스템은 [[시스템모델링-메시지 표시|"메시지 표시"]]를 호출한다.
			1. {파라미터} "신청한 휴가의 신청일수를 다시 확인해주세요."
2. 시스템은 선택한 사용유형을 편집한다.
	1. {항목} 필수 입력 항목
3. 시스템은 선택한 사용유형을 휴가등록 기본항목의 휴가 추가 리스트에 추가한다.
	1. 마지막에 추가한 휴가가 아래로 오도록 한다.

### [휴가 등록]
1. 시스템은 백엔드에 보낼 전송데이터를 편집한다.
	1. 사용 유형이 "종일" 이다.
		1. 시작시간 : "09", 종료시간 : "18"을 전송데이터에 추가한다.
	2. 사용 유형이 "반차" 이다.
		1. 사용시간을 시작시간, 종료시간으로 "hh" 형태로 후 추가한다.
		2. 종료일 : 사용일
	3. 사용 유형이 "시간차" 이다.
		1. 종료일 : 사용일
	4. {전송데이터} 휴가유형ID, 사용유형, 시작일, 종료일, 시작시간, 종료시간, 신청일수
2. 시스템은 "백엔드-휴가 등록"을 호출한다.
	1. {파라미터} 휴가유형ID, 사용유형, 시작일, 종료일, 시작시간, 종료시간, 신청일수
	2. {반환} 등록완료 여부
3. 등록완료시 결과값을 반환한다.
	1. {반환} result : "Y"

### [메뉴 닫기]


### [휴일 확인]
1. 시스템은 [[시스템모델링-휴일 확인|"휴일 확인"]] 모델을 호출한다.
	1. {파라미터} 날짜
	2. {반환} isHoliday : 휴일 여부 (true / false)
2. 선택한 날짜가 휴일이다.
	1. 시스템은 [[시스템모델링-메시지 표시|"메시지 표시"]]를 호출한다.
		1. {파라미터} "휴가를 신청할 수 없는 날짜입니다."

### [산정기간 산출]
1. 시스템은 "신청기간 일수계산"을 호출한다.
	1. {파라미터} 시작일, 종료일
	2. {반환} 신청일수
	3. {설명} 공휴일이 존재하면 0을 반환한다. 시작일 > 종료일 이면 음수를 반환한다.
2. 반환받은 신청일수가 0이다.
	1. 시스템은 "메시지 표시"를 호출한다.
		1. {파라미터} "신청기간내에 공휴일이 존재합니다."
3. 반환받은 신청일수가 음수이다.
	1. 시스템은 "메시지 표시"를 호출한다.
		1. {파라미터} "휴가시작일 또는 휴가종료일을 확인해주세요."

### [산정기간 산출-시간차]
1. 시스템은 "산정기간 산출-시간차"를 호출한다.
	1. {파라미터} 시작시간, 종료시간
	2. {반환} 신청일수
	3. {설명} 0이면 같은 시간이다. 시작시간 > 종료시간이면 음수를 반환한다.
2. 반환받은 신청일수가 0이다.
	1. 시스템은 "메시지 표시"를 호출한다.
		1. {파라미터} "동일한 시간을 선택할 수 없습니다."
3. 반환받은 신청일수가 음수이다.
	1. 시스템은 "메시지 표시"를 호출한다.
		1. {파라미터} "시작시간 또는 종료시간을 확인해주세요."

### [예시 화면]

![[휴가등록화면.png]]